# ğŸš€ Trading LongPort

> ğŸ§  åŸºäº **Python + LongPort OpenAPI SDK** çš„é«˜æ€§èƒ½è‡ªåŠ¨åŒ–äº¤æ˜“æœåŠ¡ï¼Œé€šè¿‡ **TradingView Webhook** å®ç°åšå¤š / åšç©ºç­–ç•¥çš„å…¨è‡ªåŠ¨æ‰§è¡Œã€‚

<div align="center">

[![Python](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](./LICENSE)
[![TradingView](https://img.shields.io/badge/TradingView-Webhook-blue?logo=tradingview)](https://www.tradingview.com/)
[![LongPort](https://img.shields.io/badge/LongPort-OpenAPI-orange)](https://open.longportapp.com/)

</div>

---

## ğŸ§© é¡¹ç›®ç®€ä»‹

Trading LongPort å®ç°äº†ä» **TradingView ä¿¡å· â†’ LongPort å®ç›˜ä¸‹å•** çš„å®Œæ•´é“¾è·¯ã€‚ä¸“æ³¨äºç¾è‚¡å¸‚åœºï¼Œé€‚ç”¨äºè¶‹åŠ¿è·Ÿè¸ªã€å‡å€¼å›å½’ã€çªç ´ã€AI é©±åŠ¨ç­‰å¤šç§é‡åŒ–ç­–ç•¥ã€‚

### ğŸ”§ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½               | è¯´æ˜                                    |
| :----------------- | :-------------------------------------- |
| âœ… è‡ªåŠ¨äº¤æ˜“æ‰§è¡Œ    | ä» TradingView ä¿¡å·åˆ° LongPort å®ç›˜ä¸‹å• |
| âœ… é™ä»·å•ä¸‹å•      | ä½¿ç”¨ç›˜å£ä¹°ä¸€ / å–ä¸€ä»·æäº¤ LO è®¢å•       |
| âœ… æ™ºèƒ½ä»“ä½æ§åˆ¶    | é»˜è®¤åŠä»“ï¼Œå¯é…ç½®æ¯”ä¾‹                    |
| âœ… å¼‚æ­¥ & é‡è¯•æœºåˆ¶ | å¼‚æ­¥æ‰§è¡Œã€è‡ªåŠ¨é‡è¯•ã€æœªæˆäº¤è®¢å•è‡ªåŠ¨å–æ¶ˆ  |
| âœ… å®‰å…¨æœºåˆ¶        | æ¥å£åŠ å¯† + æ•æ„Ÿä¿¡æ¯éš”ç¦»                 |
| âœ… AI åŸºæœ¬é¢åˆ†æ   | è‡ªåŠ¨æ£€æµ‹é‡å¤§æ–°é—»æˆ–åŸºæœ¬é¢äº‹ä»¶            |
| âœ… å¤šæ¸ é“æ¨é€      | æ”¯æŒé‚®ä»¶ / QQ ç¾¤ æ¶ˆæ¯æ¨é€               |
| âœ… ä»·æ ¼ç¼“å­˜        | é«˜é€Ÿä¸‹å•ï¼Œæé«˜å®ç›˜æ€§èƒ½                  |

---

## ğŸ“š ç›®å½•

- [ğŸ“Š æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [ğŸ“¡ Webhook åè®®](#-webhook-ä¿¡å·åè®®)
- [âš™ï¸ ç¯å¢ƒé…ç½®](#ï¸-ç¯å¢ƒé…ç½®)
- [ğŸš€ å¿«é€Ÿå¯åŠ¨](#-å¿«é€Ÿå¯åŠ¨)
- [ğŸŒ API æ¥å£](#-api-æ¥å£)
- [ğŸ¤ è´¡çŒ®ä¸åé¦ˆ](#-è´¡çŒ®ä¸åé¦ˆ)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

---

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½         | æè¿°                                |
| :----------- | :---------------------------------- |
| Webhook æ¥æ”¶ | ç›‘å¬ TradingView ä¿¡å·               |
| è‡ªåŠ¨äº¤æ˜“     | æ‰§è¡Œ LongPort ä¸‹å•é€»è¾‘              |
| ä¿¡å·ç»„åˆ     | `buy+long`, `sell+short`, `flat` ç­‰ |
| é«˜å¯é æ€§     | è‡ªåŠ¨é‡è¯• + å¼‚æ­¥æ‰§è¡Œ                 |
| æ—¥å¿—è¿½è¸ª     | å®Œæ•´äº¤æ˜“æ—¥å¿—                        |
| ç¼“å­˜         | ä»·æ ¼ & ä»“ä½ç¼“å­˜ï¼ŒåŠ é€Ÿä¸‹å•           |
| æ¶ˆæ¯æ¨é€     | é‚®ä»¶ / QQ ç¾¤ é€šçŸ¥                   |

---

## ğŸ“¡ Webhook ä¿¡å·åè®®

TradingView â†’ Webhook è¯·æ±‚ç¤ºä¾‹ï¼š

```json
{
  "action": "buy",
  "sentiment": "long",
  "ticker": "TSLA",
  "token": "1234"
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ              | å¯é€‰å€¼                   | å«ä¹‰                     |
| :---------------- | :----------------------- | :----------------------- |
| `action`          | `buy`, `sell`            | äº¤æ˜“åŠ¨ä½œ                 |
| `sentiment`       | `long`, `short`, `flat`  | å¸‚åœºè§‚ç‚¹                 |
| `ticker`          | å¦‚ `TSLA`                | è‚¡ç¥¨ä»£ç ï¼ˆè‡ªåŠ¨è¡¥ `.US`ï¼‰ |
| `instrument`      | `stock`, `etf`, `option` | äº¤æ˜“æ ‡çš„ç±»å‹             |
| `price`           | æ•°å€¼                     | å¯ä¼  TradingView å½“å‰ä»·  |
| `stop_loss_price` | æ•°å€¼                     | å¯ä¼ æ­¢æŸä»·               |

### è¡Œä¸ºæ˜ å°„è¡¨

| action | sentiment | è¡Œä¸ºæè¿°       |
| :----- | :-------- | :------------- |
| buy    | long      | åšå¤šï¼ˆä¹°å…¥ï¼‰   |
| sell   | short     | åšç©ºï¼ˆå–å‡ºï¼‰   |
| buy    | flat      | å¹³ç©ºä»“ï¼ˆå›è¡¥ï¼‰ |
| sell   | flat      | å¹³å¤šä»“ï¼ˆå–å‡ºï¼‰ |

---

## âš™ï¸ ç¯å¢ƒé…ç½®

<details>
<summary>ç‚¹å‡»å±•å¼€ç¯å¢ƒå˜é‡è¯´æ˜</summary>

| ç¯å¢ƒå˜é‡                 | é»˜è®¤å€¼  | è¯´æ˜                   |
| :----------------------- | :------ | :--------------------- |
| `LONGPORT_APP_KEY`       | â€”       | LongPort åº”ç”¨ Key      |
| `LONGPORT_APP_SECRET`    | â€”       | LongPort åº”ç”¨ Secret   |
| `LONGPORT_ACCESS_TOKEN`  | â€”       | LongPort è®¿é—®ä»¤ç‰Œ      |
| `WEBHOOK_EXPECTED_TOKEN` | `1234`  | æ¥å£åŠ å¯†ä»¤ç‰Œ           |
| `MAX_PURCHASE_RATIO`     | `0.5`   | æœ€å¤§ä¹°å…¥æ¯”ä¾‹           |
| `ENABLE_PRICE_CACHE`     | `false` | æ˜¯å¦å¼€å¯ä»·æ ¼ç¼“å­˜       |
| `ENABLE_NEWS_STREAM`     | `false` | æ˜¯å¦å¯ç”¨ AI æ–°é—»åˆ†æ   |
| `ENABLE_EMAIL_MSG`       | `false` | é‚®ä»¶æ¨é€               |
| `ENABLE_QQ_MSG`          | `false` | QQ ç¾¤æ¨é€              |
| ...                      | ...     | æ›´å¤šè¯·æŸ¥çœ‹ `config.py` |

</details>

---

## å‡å€¼å›å½’

å›å½’çš„æœ¬è´¨æ˜¯ä»·æ ¼å¯¹ä»·å€¼ä¸­æ¢çš„å¼•åŠ›ä½œç”¨ã€‚å½“å¸‚åœºå› æƒ…ç»ªã€æµåŠ¨æ€§æˆ–çŸ­æœŸæ¶ˆæ¯æ¨åŠ¨ä»·æ ¼è¿œç¦»å…¶ç»Ÿè®¡å‡è¡¡ä½ï¼ˆå¦‚å‡çº¿ã€å¸ƒæ—å¸¦ä¸­è½¨ï¼‰ï¼Œè¿‡åº¦æŠ›å”®æˆ–è¿½æ¶¨å¯¼è‡´å¤±è¡¡ï¼Œåå‘åŠ›é‡å°†é€æ­¥ç§¯èšã€‚ä¸€æ—¦åŠ¨èƒ½è¡°ç«­ï¼Œä»·æ ¼å€¾å‘äºå‘å‡å€¼é æ‹¢ã€‚  

å‡å€¼å›å½’å¹¶éé€†åŠ¿æŠ„åº•ï¼Œè€Œæ˜¯æ•æ‰â€œè¶…è°ƒåçš„ä¿®å¤æ¦‚ç‡â€ã€‚å®ƒä¾èµ–äºå¸‚åœºçŸ­æœŸè®°å¿†æ€§å’Œæ³¢åŠ¨æ”¶æ•›ç‰¹æ€§â€”â€”æç«¯ä¸ä¼šæŒç»­ï¼Œä¿®æ­£ç»ˆå°†åˆ°æ¥ã€‚åœ¨å…³é”®æ”¯æ’‘/é˜»åŠ›åŒºã€ç§»åŠ¨å¹³å‡çº¿ã€å¯†é›†æˆäº¤åŒºé™„è¿‘ï¼Œå¸¸èšé›†å¤§é‡é™ä»·å•ä¸ç®—æ³•åšå¸‚æŒ‡ä»¤ã€‚å½“ä»·æ ¼å¿«é€Ÿå‡»ç©¿è¿™äº›åŒºåŸŸåæ— åŠ›ç»´æŒï¼Œä¼šè§¦å‘åå‘è®¢å•æµï¼Œå½¢æˆâ€œåå¼¹ç€‘å¸ƒâ€ï¼ŒåŠ é€Ÿå›å½’è¿›ç¨‹ã€‚çœŸæ­£æœ‰æ•ˆçš„å›å½’éœ€è¦â€œç¡®è®¤â€â€”â€”åŒ…æ‹¬ç¼©é‡ä¼ç¨³ã€æŒ‡æ ‡èƒŒç¦»ï¼ˆå¦‚RSIï¼‰ã€Kçº¿å½¢æ€åè½¬ï¼ˆé”¤å­çº¿ã€åæ²¡ï¼‰ç­‰ã€‚å‡ä¿¡å·ä¹‹æ‰€ä»¥é¢‘ç¹ï¼Œæ­£æ˜¯å› ä¸ºç¼ºä¹ç»“æ„æ”¯æ’‘ï¼Œä»…ä¸ºå™ªéŸ³æ‰°åŠ¨ã€‚  

å‡å€¼å›å½’æœ¬è´¨ä¸Šæ˜¯â€œå¯¹æŠ—æƒ¯æ€§â€çš„å°è¯•ï¼Œä½†å¹¶éæ¯ä¸€æ¬¡å›è°ƒéƒ½æˆåŠŸã€‚æˆåŠŸçš„äº¤æ˜“è€…æ¥å—â€œè¢«è¶‹åŠ¿ç¢¾å‹æ˜¯å¸¸æ€â€ï¼Œé€šè¿‡å°ä»“è¯•é”™ã€ä¸¥æ ¼æ­¢æŸå’Œé«˜ç›ˆäºæ¯”ï¼Œåœ¨éœ‡è¡ä¸­ç§¯ç´¯ä¼˜åŠ¿ã€‚ä»·æ ¼æ°¸è¿œåœ¨å¹³è¡¡ä¸å¤±è¡¡ä¹‹é—´æ‘†åŠ¨ã€‚è¿‡åº¦å³æ˜¯æœºä¼šï¼Œå†·é™å³æ˜¯åˆ©æ¶¦ã€‚å¤šæ•°äººå®³æ€•ä½ç‚¹ï¼Œè¿½é€é«˜ç‚¹ï¼Œå› è€Œé”™å¤±æœ€ä½³ä¹°ç‚¹ã€‚å›å½’æ€ç»´è¦æ±‚é€†å‘è€Œè¡Œï¼šåœ¨ææ…Œä¸­å¯»æ‰¾ä»·å€¼ï¼Œåœ¨ç‹‚çƒ­ä¸­é€€å‡ºæ¸¸æˆã€‚å…ˆçŸ¥å…ˆè§‰è€…åˆ©ç”¨ç¾¤ä½“éç†æ€§å…¥åœºï¼›åçŸ¥åè§‰è€…åœ¨åå¼¹ä¸­é€”æ‰é†’æ‚Ÿã€‚å¸‚åœºæœ¬è´¨æ˜¯ä¸ç¡®å®šçš„ï¼Œä½†å‡å€¼æä¾›äº†ä¸€ä¸ªé”šã€‚å®ƒä¸æ˜¯é¢„æµ‹åº•éƒ¨ï¼Œè€Œæ˜¯è¯†åˆ«æç«¯ï¼Œå¹¶å¯¹æ¦‚ç‡åšå‡ºååº”ã€‚`strategy/Ultimate_RSI.pine`

## çªç ´äº¤æ˜“ï¼ˆè¶‹åŠ¿äº¤æ˜“ï¼‰

çªç ´çš„æœ¬è´¨æ˜¯å¸‚åœºä¾›éœ€å…³ç³»å‘ç”Ÿæ ¹æœ¬æ€§è½¬å˜ï¼Œå½“ä»·æ ¼é•¿æœŸåœ¨æŸä¸€åŒºé—´éœ‡è¡ï¼ˆå¦‚æ”¯æ’‘/é˜»åŠ›åŒºé—´ï¼‰ï¼Œå¤šç©ºåŒæ–¹å¤„äºåŠ¨æ€å¹³è¡¡ã€‚ä¸€æ—¦ä»·æ ¼æœ‰æ•ˆçªç ´å…³é”®ä½ï¼Œæ„å‘³ç€ä¸€æ–¹åŠ›é‡å‹å€’å¦ä¸€æ–¹ï¼Œæ–°çš„è¶‹åŠ¿å¯èƒ½å½¢æˆã€‚

çªç ´å¾€å¾€ä¼´éšç€é‡è¦ä¿¡æ¯çš„é‡Šæ”¾ï¼ˆå¦‚è´¢æŠ¥ã€æ”¿ç­–ã€å®è§‚æ•°æ®ï¼‰æˆ–å¸‚åœºæƒ…ç»ªçš„ç´¯ç§¯ã€‚å½“ä»·æ ¼çªç ´å…³é”®ä½ç½®æ—¶ï¼Œå®ƒæˆä¸ºä¸€ç§â€œä¿¡å·â€ï¼Œè¢«å¸‚åœºå‚ä¸è€…å¹¿æ³›è¯†åˆ«å¹¶å“åº”ï¼Œä»è€Œå½¢æˆé›†ä½“è¡ŒåŠ¨ï¼Œæ¨åŠ¨è¶‹åŠ¿å»¶ç»­ã€‚å…³é”®ä»·ä½é™„è¿‘é€šå¸¸èšé›†å¤§é‡æ­¢æŸå•å’ŒæŒ‚å•ï¼ˆå¦‚æœºæ„è®¢å•ã€ç®—æ³•äº¤æ˜“æŒ‡ä»¤ï¼‰ã€‚çªç ´ä¼šè§¦å‘è¿™äº›éšè—è®¢å•ï¼Œå½¢æˆâ€œæµåŠ¨æ€§ç€‘å¸ƒâ€ï¼ŒåŠ å‰§ä»·æ ¼è¿åŠ¨ã€‚å½“ä»·æ ¼çªç ´å‰é«˜æ—¶ï¼Œç©ºå¤´æ­¢æŸè¢«æ¿€æ´»ï¼ŒåŒæ—¶è¿½æ¶¨ä¹°ç›˜æ¶Œå…¥ï¼Œå½¢æˆæ­£åé¦ˆã€‚çœŸæ­£çš„çªç ´éœ€è¦â€œç¡®è®¤â€â€”â€”åŒ…æ‹¬å¹…åº¦ï¼ˆå¤§å®ä½“ï¼‰ã€æ—¶é—´ï¼ˆæ”¶ç›˜ç«™ç¨³ï¼‰ã€æˆäº¤é‡æ”¾å¤§ç­‰ã€‚å‡çªç ´ï¼ˆFalse Breakoutï¼‰ä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œæ­£æ˜¯å› ä¸ºç¼ºä¹è¿™äº›ç¡®è®¤è¦ç´ ï¼Œåæ˜ å‡ºå¸‚åœºè¯•æ¢æ€§è¡Œä¸ºã€‚

çªç ´äº¤æ˜“æœ¬è´¨ä¸Šæ˜¯â€œæ•æ‰æ‹ç‚¹â€çš„å°è¯•ï¼Œä½†å¹¶éæ¯ä¸€æ¬¡çªç ´éƒ½æˆåŠŸã€‚æˆåŠŸçš„äº¤æ˜“è€…æ¥å—â€œå¤±è´¥æ˜¯ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†â€ï¼Œé€šè¿‡é£é™©æ§åˆ¶ï¼ˆå¦‚æ­¢æŸï¼‰å’Œç›ˆäºæ¯”ç®¡ç†ï¼Œåœ¨é•¿æœŸä¸­å®ç°æ­£æœŸæœ›å€¼ã€‚è¶‹åŠ¿å³æƒ¯æ€§ï¼Œä»·æ ¼ä¸€æ—¦çªç ´åŸæœ‰å¹³è¡¡ï¼Œå€¾å‘äºç»§ç»­è¿åŠ¨ã€‚çªç ´ä»£è¡¨è¶‹åŠ¿çš„å¯åŠ¨ï¼Œè€Œè¶‹åŠ¿å…·æœ‰æƒ¯æ€§ã€‚é¡ºåŠ¿è€Œä¸ºï¼Œæ˜¯å¯¹å¸‚åœºèƒ½é‡çš„å°Šé‡ã€‚å¤šæ•°äººå€¾å‘äºâ€œç­‰å¾…ç¡®è®¤â€ï¼Œå¯¼è‡´çªç ´åˆæœŸå‚ä¸åº¦ä½ï¼Œéšåæ‰é€æ­¥è·Ÿé£ã€‚çªç ´åæ˜ äº†äººç±»è®¤çŸ¥çš„æ»åæ€§ï¼šäººä»¬å¾€å¾€åœ¨äº‹å®æ˜¾ç°åæ‰æ‰¿è®¤å˜åŒ–ã€‚å…ˆçŸ¥å…ˆè§‰è€…åˆ©ç”¨è¿™ç§æ»åï¼Œåœ¨çªç ´åˆæœŸå…¥åœºï¼›åçŸ¥åè§‰è€…åœ¨è¶‹åŠ¿ä¸­æœŸè¿½æ¶¨ã€‚å¸‚åœºæœ¬è´¨æ˜¯ä¸ç¡®å®šçš„ï¼Œä½†äººç±»æœ¬èƒ½å¯»æ±‚ç¡®å®šæ€§ã€‚å®ƒä¸æ˜¯é¢„æµ‹æœªæ¥ï¼Œè€Œæ˜¯å¯¹å½“ä¸‹åšå‡ºååº”ã€‚`strategy/TSLL_5MIN_SUPERTREND_V5.pine`

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# 1ï¸âƒ£ å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡
export LONGPORT_APP_KEY="xxx"
export LONGPORT_APP_SECRET="xxx"
export LONGPORT_ACCESS_TOKEN="xxx"

# 3ï¸âƒ£ å¯åŠ¨æœåŠ¡
python app.py
```

> ğŸŒ é»˜è®¤è¿è¡Œåœ¨ `http://0.0.0.0:8080`

---

## ğŸŒ API æ¥å£

### `POST /api/webhook`

æ¥æ”¶ TradingView ä¿¡å·å¹¶è§¦å‘äº¤æ˜“é€»è¾‘ã€‚

```bash
curl -X POST http://localhost:8080/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "action": "buy",
    "sentiment": "long",
    "ticker": "TSLA",
    "token": "1234"
  }'
```

**å“åº”ç¤ºä¾‹**

```json
{ "status": "success" }
```

## äº¤æ˜“å®ä¾‹

### `æ­£è‚¡äº¤æ˜“`

```bash
curl -X POST http://localhost:8080/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "action": "buy",
    "sentiment": "long",
    "ticker": "TSLA",
    "token": "1234"
  }'
```

### `ä¿è¯é‡‘äº¤æ˜“`

```bash
curl -X POST http://localhost:8080/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "action": "buy",
    "sentiment": "long",
    "ticker": "TSLA",
    "token": "1234",
    "is_margin": true,
    "margin_rate": 1.2
  }'
```

### `ETF äº¤æ˜“`

```bash
curl -X POST http://localhost:8080/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "action": "buy",
    "sentiment": "long",
    "instrument": "etf",
    "ticker": "TSLA",
    "token": "1234"
  }'
```

### `æœŸæƒäº¤æ˜“`

```bash
curl -X POST http://localhost:8080/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "action": "buy",
    "sentiment": "long",
    "instrument": "option",
    "ticker": "TSLA",
    "token": "1234"
  }'
```

---

## ğŸ¤ è´¡çŒ®ä¸åé¦ˆ

ğŸ’¡ æ¬¢è¿æäº¤ Issue æˆ– Pull Request
ğŸ“¬ å¦‚æœ‰ç–‘é—®ï¼Œè¯·é€šè¿‡ Issues æˆ–é‚®ä»¶è”ç³»ä½œè€…

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº **MIT License** å¼€æºå‘å¸ƒã€‚

---

<div align="center">

Made with â¤ï¸ by Rustaceans for Traders
âœ¨ Powering the next generation of AI-driven trading âœ¨

</div>
